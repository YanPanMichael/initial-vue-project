<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Car Table</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script crossorigin="anonymous" src="https://lib.baomitu.com/vue/2.5.21/vue.js"></script>
</head>
<body>
  <section id="root">
    <article>
      <div class="card bg-light">
        <div class="card-body">
          <h4 class="card-title">Car Table</h4>
          <p class="card-text">
            <form class="form-inline">
              <div class="form-row">
                <label for="carId">Id: </label>
                <input type="text" name="id" id="carId" class="form-control" placeholder="car id" aria-describedby="helpId" v-model="id">
                <label for="carName">Name: </label>
                <input type="text" name="name" id="carName" class="form-control my-1" placeholder="car name" aria-describedby="helpId" v-model="name">
                <button type="button" class="btn btn-primary mr-3" @click="addCar">Add</button>
              </div>
            </form>
          </p>
        </div>
      </div>

    </article>
    <article>
      <table class="table table-hover">
        <tbody>
          <tr v-for="(item, index) in list" :key="item.id">
            <td scope="row">{{item.id}}</td>
            <td v-text="item.name"></td>
            <td>{{item.ctime}}</td>
            <td>
              <a href="#" @click.prevent="deleteItem(item.id)">delete</a>
            </td>
          </tr>
        </tbody>
      </table>
    </article>
  </section>
  <script>
    new Vue({
      el: "#root",
      data: {
        list: [{id: 1, name: "car1", ctime: new Date()}, {id: 2, name: "car2", ctime: new Date()}],
        id: '',
        name: ''
      },
      methods: {
        addCar() {
          const newCar = {
            id: this.id,
            name: this.name,
            ctime: new Date()
          }
          if(!newCar.id || !newCar.name) {
            alert("please input id and name!");
            return;
          }
          if(!new RegExp(/^\d+$/).test(newCar.id)) {
            alert("please input current format id!");
            return;
          }
          this.list = [...this.list, newCar];
        },
        deleteItem(id) {
          //method1
          // const matIndex = this.list.findIndex((ele) => {
          //   if (ele.id === id) {
          //     return true;
          //   }
          // })
          // this.list.splice(matIndex, 1);
          //method2
        }
      },
    })
  </script>
</body>
</html>